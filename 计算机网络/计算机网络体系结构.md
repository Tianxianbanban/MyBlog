## 计算机网络体系结构



首先，在理解计算机网络体系结构之前，需要先理解网络当中通过“分层“来将庞大复杂的问题**转化成若干较小局部问题**的处理方式，分层以后对于更小的局部问题更易于研究和处理，同时低层向高层提供服务，高层可以**屏蔽低层的实现细节**。计算机网络体系结构的层次划分方式有OSI七层协议、TCP/IP协议、还有五层划分方式，其中TCP/IP协议栈是最重要的。

1. 应用层：

   **不同的网络应用有不同的应用层协议**，定义了应用进程之间交互的规则，规定了某个应用程序的数据格式。

2. 表示层：

   提供**数据和信息正确的语法表示变换方法** ，如加密解密、压缩、格式转换等。 

3. 会话层：

   **会话连接的管理服务**，提供包括访问验证和会话管理在内的建立和维护应用之间通信的机制，如服务器验证用户登录便是由会话层完成的。通过执行多种机制在应用程序间建立、维持和终止会话。会话层机制包括计费、话路控制、会话参数协商等。常见的会话层协议有：结构化查询语言（SQL，Structed Query Language）、网络文件系统（NFS，Network File System）、远程过程调用（RPC，Remote Procedure Call）等。

4. 运输层：

   向两台主机之间的**进程**间通信提供通用的数据传输服务，不针对某个具体的网络应用，**多种应用都可以使用同一个运输层服务**，在运输层可以实现**可靠传输**和**不可靠传输**，以及传输层的错误检测、流量控制、拥塞控制等等。 

5. 网络层：

   通过逻辑地址就是**IP地址**为分组交换网上的不同**主机**提供通信服务，**选择合适的路由**让数据从源端到目的端的传输。

6. 数据链路层：

   定义了通过通信介质相互连接的设备之间，数据传输的规范。 将网络层交下的IP数据报加上首部尾部当中的控制信息**封装成帧**，在网络结点之间链路上传输，通过**物理地址**访问媒介，还可以进行**错误检测和修正**。 

7. 物理层：

   物理层考虑的是**怎样**在连接各种计算机的传输媒体上传输数据比特流，而**不是指具体的传输媒体**。它**确定了和传输媒体接口有关的一些特性**：机械特性、电气特性、功能特性、过程特性， 主要任务是**将比特流与电子信号进行转换**，进行设备之间比特流的传输。

OSI标准并没有成为实际上的标准，因为商业化的不及时，TCP/IP成为了实际上标准。



**TCP/IP四层协议**

1. 应用层：域名系统DNS、万维网应用HTTP、电子邮件SMTP、文件传输协议FTP等。
2. 运输层：传输控制协议TCP、用户数据报协议UDP等。
3. 网际层：网际协议IP等，以及相关的可能不属于网路层的RIP路由选择协议、ARP地址解析协议等等。
4. 网络接口层



**五层协议**

1. 应用层
2. 运输层
3. 网络层
4. 数据链路层
5. 物理层



**相关交换设备**

+ 网关：网关不是一个硬件设备。工作在应用层、运输层。在传输层上可以实现网络互连，是最复杂的网络互连设备，仅用于两个高层协议不同的网络互连。网关的结构也和路由器类似，不同的是互连层。网关既可以用于广域网互连，也可以用于局域网互连。

+ 路由器：工作在网络层，进行路由选择与分组的存储转发。不但起交换数据的作用，它还会寻找到数据会传给谁，该怎么传，这是交换机和路由器最基本的区别。

  不过，现在的3层交换机也可以有路由功能。但是，交换机拥有强大的数据交换能力，这是路由器做不到的；路由器有强大的路由功能及安全策略能力，也是交换机做不到的。交换机一般用在区域内起数据交换的功能，路由器一般用在区域间起路由转发的功能。

+ 交换机：顾名思意，主要是起交换数据的作用。工作在数据链路层、网络层。可以识别数据包中的 MAC 地址信息，根据 MAC 地址进行转发，并将这些 MAC 地址与对应的端口记录在自己内部的一个地址表中。

  交换机用在局域网中，交换机通过纪录局域网内各节点机器的MAC地质(物理地址)就可以实现传递报文,无需看报文中的IP地质。路由器识别不同网络的方法是通过识别不同网络的网络ID号(IP地址的高端部分)进行的，所以为了保证路由成功，每个网络都必须有一个唯一的网络编号。路由器通过察看报文中IP地址，来决定路径，向那个子网(下一跳)路由，也就是说交换机工作在数据链路层看MAC地址，路由器工作在网际层看IP地质。但是由于现在网络设备的发展，很多设备既有交换机的功能有由路由器的功能(交换试路由器)使得两者界限越来越模糊。

+ 网桥：工作在数据链路层。可以将两个 LAN 连起来，根据 MAC 地址来转发帧。

+ 集线器：工作在物理层，是纯硬件设备，主要用来连接计算机等网络终端。

+ 中继器：工作在物理层，在比特级别对网络信号进行再生和重定时，使它们能够在网络上传输更长的距离。  



